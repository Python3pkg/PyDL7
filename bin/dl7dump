#!/usr/bin/env python3

import argparse, dl7, json, sys

parser = argparse.ArgumentParser(description='Dump DL7 file')
parser.add_argument('file', metavar='FILE', type=argparse.FileType('r'),
                   help='DL7 file to read')

args = parser.parse_args()
inputfile = args.file
parsed = dl7.parse(inputfile)

def to_dict(obj):
    return obj.__dict__

print(json.dumps(parsed, default=to_dict))